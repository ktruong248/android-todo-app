package com.example.ktruong.todoapp;import android.app.Activity;import android.os.Bundle;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.widget.AdapterView;import android.widget.ArrayAdapter;import android.widget.EditText;import android.widget.ListView;import com.example.ktruong.todoapp.entities.TodoItem;import com.example.ktruong.todoapp.repositories.TodoItemRepository;import com.example.ktruong.todoapp.repositories.TodoItemRepositoryImpl;import org.apache.commons.io.FileUtils;import java.io.File;import java.io.IOException;import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;import java.util.LinkedList;import java.util.List;import static com.example.ktruong.todoapp.utils.StringUtils.isNotEmpty;public class MainActivity extends Activity {    private ListView lvItems;    private List<TodoItem> items;    private ArrayAdapter<String> itemsAdapter;    private TodoItemRepository todoItemRepository;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        todoItemRepository = new TodoItemRepositoryImpl(this);        items = todoItemRepository.getAll();        lvItems = (ListView) findViewById(R.id.lvItems);        itemsAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, items);        lvItems.setAdapter(itemsAdapter);        setupListViewListener();    }    private void setupListViewListener() {        lvItems.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {            @Override            public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {                items.remove(position);                itemsAdapter.notifyDataSetChanged();                todoItemRepository.save(items);                return true;            }        });    }    @Override    public boolean onCreateOptionsMenu(Menu menu) {        // Inflate the menu; this adds items to the action bar if it is present.        getMenuInflater().inflate(R.menu.menu_main, menu);        return true;    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        int id = item.getItemId();        //noinspection SimplifiableIfStatement        if (id == R.id.action_settings) {            return true;        }        return super.onOptionsItemSelected(item);    }    public void onAddItem(View v) {        EditText etNewItem = (EditText) findViewById(R.id.etNewItem);        String itemText = etNewItem.getText().toString();        if (isNotEmpty(itemText)) {            itemsAdapter.add(itemText);            etNewItem.setText("");            writeItems(items);        }    }    private void writeItems(List<TodoItem> itemsToSave) {        todoItemRepository.save(itemsToSave);    }}