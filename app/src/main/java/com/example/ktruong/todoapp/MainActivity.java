package com.example.ktruong.todoapp;import android.app.Activity;import android.os.Bundle;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.widget.AdapterView;import android.widget.ArrayAdapter;import android.widget.EditText;import android.widget.ListView;import com.example.ktruong.todoapp.entities.TodoItem;import com.example.ktruong.todoapp.repositories.TodoItemRepository;import com.example.ktruong.todoapp.repositories.TodoItemRepositoryImpl;import java.util.ArrayList;import java.util.List;import static com.example.ktruong.todoapp.utils.StringUtils.isNotEmpty;public class MainActivity extends Activity {    private ListView lvItems;    private List<TodoItemView> todoItemViewList;    private ArrayAdapter<TodoItemView> itemsAdapter;    private TodoItemRepository todoItemRepository;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        todoItemRepository = new TodoItemRepositoryImpl(this);        List<TodoItem> todoItems = todoItemRepository.getAll();        todoItemViewList = new ArrayList();        if(todoItems != null) {            for (TodoItem todoItem : todoItems) {                todoItemViewList.add(new TodoItemView(todoItem));            }        }        lvItems = (ListView) findViewById(R.id.lvItems);        itemsAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, todoItemViewList);        lvItems.setAdapter(itemsAdapter);        setupListViewListener();    }    /**     *     */    private void setupListViewListener() {        lvItems.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {            @Override            public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {                TodoItemView removed = todoItemViewList.remove(position);                itemsAdapter.notifyDataSetChanged();                todoItemRepository.delete(removed.getTodoItem());                return true;            }        });    }    @Override    public boolean onCreateOptionsMenu(Menu menu) {        // Inflate the menu; this adds todoItemViewList to the action bar if it is present.        getMenuInflater().inflate(R.menu.menu_main, menu);        return true;    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        int id = item.getItemId();        System.out.println("item " + id + "selected " + item.getTitle());        //noinspection SimplifiableIfStatement        if (id == R.id.action_settings) {            return true;        }        return super.onOptionsItemSelected(item);    }    public void onAddItem(View v) {        EditText etNewItem = (EditText) findViewById(R.id.etNewItem);        String itemText = etNewItem.getText().toString();        if (isNotEmpty(itemText)) {            TodoItem newItem = new TodoItem(null, itemText, 0);            itemsAdapter.add(new TodoItemView(newItem));            etNewItem.setText("");            todoItemRepository.addItem(newItem);        }    }}